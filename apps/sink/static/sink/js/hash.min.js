function calcFileHash(n,r){var a=[],e=n.size;function i(r,e,i){var t=new FileReader;t.onload=function(n){if(n)r=n.target.result;else var r=t.content;i.call(t,function(n){for(var r=0;r<n.length;r++)a[(r+8)%8]+=n.charCodeAt(r)}(r))},void 0===e?t.readAsBinaryString(n.slice(r)):t.readAsBinaryString(n.slice(r,e))}for(var t=0;t<8;t++)a[t]=255&e,e>>=8;i(0,65536,function(){i(n.size-65536,void 0,function(){r.call(null,n,function(n){var r=255,a="0123456789abcdef",e="",i=7;for(n[1]+=n[0]>>8,n[0]=n[0]&r,n[2]+=n[1]>>8,n[1]=n[1]&r,n[3]+=n[2]>>8,n[2]=n[2]&r,n[4]+=n[3]>>8,n[3]=n[3]&r,n[5]+=n[4]>>8,n[4]=n[4]&r,n[6]+=n[5]>>8,n[5]=n[5]&r,n[7]+=n[6]>>8,n[6]=n[6]&r,n[7]=n[7]&r;i>-1;i--)e+=a.charAt(n[i]>>4&15)+a.charAt(15&n[i]);return e}(a))})})}